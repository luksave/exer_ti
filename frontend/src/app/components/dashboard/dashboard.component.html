<div class="dashboard-container">
  <h1>Dashboard - Estat√≠sticas de Ve√≠culos</h1>

  <!-- Mensagem de erro -->
  <div *ngIf="error" class="alert alert-error">
    {{ error }}
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Carregando estat√≠sticas...</p>
  </div>

  <!-- Estat√≠sticas -->
  <div *ngIf="!loading" class="stats-grid">
    
    <!-- Card de Ve√≠culos Vendidos -->
    <div class="stat-card vendidos">
      <div class="stat-icon">üöó</div>
      <div class="stat-content">
        <h3>{{ vendidosCount }}</h3>
        <p>Ve√≠culos Vendidos</p>
      </div>
    </div>

    <!-- Card de Ve√≠culos da √öltima Semana -->
    <div class="stat-card ultima-semana">
      <div class="stat-icon">üìÖ</div>
      <div class="stat-content">
        <h3>{{ veiculosUltimaSemana.length }}</h3>
        <p>Cadastrados na √öltima Semana</p>
      </div>
    </div>
  </div>

  <!-- Distribui√ß√µes -->
  <div *ngIf="!loading" class="distributions">
    
    <!-- Distribui√ß√£o por D√©cada -->
    <div class="distribution-card">
      <h2>Distribui√ß√£o por D√©cada de Fabrica√ß√£o</h2>
      <div class="distribution-list">
        <div *ngFor="let item of distribuicaoDecada" class="distribution-item">
          <div class="distribution-label">{{ item.decada }}</div>
          <div class="distribution-bar">
            <div class="bar-fill" [style.width.%]="item.percentual"></div>
          </div>
          <div class="distribution-values">
            <span class="quantidade">{{ item.quantidade }} ve√≠culos</span>
            <span class="percentual">{{ formatarPercentual(item.percentual) }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Distribui√ß√£o por Fabricante -->
    <div class="distribution-card">
      <h2>Distribui√ß√£o por Fabricante</h2>
      <div class="distribution-list">
        <div *ngFor="let item of distribuicaoFabricante" class="distribution-item">
          <div class="distribution-label">{{ item.fabricante }}</div>
          <div class="distribution-bar">
            <div class="bar-fill fabricante" [style.width.%]="item.percentual"></div>
          </div>
          <div class="distribution-values">
            <span class="quantidade">{{ item.quantidade }} ve√≠culos</span>
            <span class="percentual">{{ formatarPercentual(item.percentual) }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Ve√≠culos da √öltima Semana -->
    <div class="distribution-card" *ngIf="veiculosUltimaSemana.length > 0">
      <h2>Ve√≠culos Cadastrados na √öltima Semana</h2>
      <div class="veiculos-recentes">
        <div *ngFor="let veiculo of veiculosUltimaSemana" class="veiculo-recente">
          <div class="veiculo-info">
            <h4>{{ veiculo.veiculo }}</h4>
            <p>{{ veiculo.marca }} - {{ veiculo.ano }}</p>
            <p *ngIf="veiculo.cor">Cor: {{ veiculo.cor }}</p>
          </div>
          <div class="veiculo-meta">
            <span class="data">{{ formatarData(veiculo.created) }}</span>
            <span class="status" [class.vendido]="veiculo.vendido">
              {{ veiculo.vendido ? 'Vendido' : 'Dispon√≠vel' }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
